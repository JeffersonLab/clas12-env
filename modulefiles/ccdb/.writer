#%Module1.0

module-whatis Set CCDB_CONNECTION for write access to clasdb, password read from file.

set basename .clas12writer
set prefixes [list {$HOME} /group/clas12/packages]

source [file dirname $ModulesCurrentModulefile]/../util/functions.tcl

set found 0
foreach p $prefixes {
    if {[string index $p 0] == {$}} {
        set p [getenv $p {}]
    }
    if [file readable $p/$basename] {
        setenv CCDB_CONNECTION [lindex [split [read [open $p/$basename r]] \n] 0]
        set found 1
    }
}
if {$found == 0} {
    warn "Password file for clas12writer could not be found at any of:"
    warn [join $prefixes ,]
}

