name: clas12 environment modules CI
on:
  push:
    branches: [ ci ]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
#      - uses: cvmfs-contrib/github-action-cvmfs@v3
#        with:
#          cvmfs_repositories: 'oasis.opensciencegrid.org'
      - name: install
        run: |
          sudo apt-get install tcl-dev environment-modules
          wget https://github.com/cea-hpc/modules/releases/download/v5.4.0/modules-5.4.0.tar.gz
          tar -xzf modules-5.4.0.tar.gz
          cd modules-5.4.0 && ./configure --prefix=$PWD/../modules && make && make install
          . ./modules/init/bash
          module --version
          ./.github/workflows/test.sh ./modulefiles
          module use ./modulefiles
          module avail
          module load clas12
          module list

